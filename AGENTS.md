# AGENTS.md

# プロジェクト概要
- 意思決定支援の観点で統計手法を再現可能に実装・検証し、記事とコードを1対1で紐づけて継続的に蓄積する統合リポジトリ
- 目的は、業務課題→手法選択→評価→解釈→次アクションの型を残し、再利用可能な分析部品を増やすこと
- 主要ディレクトリは次の項目
    - `src/main/`（テーマ別notebook）
    - `scripts/`（テーマ別notebookのReadme）
    - `settings/`（環境テキスト）
    - `qiita_scripts/`（Qiitaにuploadする記事原稿）
    - `prompts/`（プロンプトテンプレ）

# セットアップ/ビルド/テスト
## セットアップ
- Python 3.11+ を用いる
- python環境はこのプロジェクト内の`.venv`を用いる
## ビルド
- 原則としてビルド工程は不要
## テスト
- Notebookを上から順に実行し再現できることを確認する
- 評価指標と判定基準は `qiita_scripts/` の記事要件と `scripts/` のReadmeに合わせる
- 乱数シードは `28` 固定で実行し、再現性を担保する
- 変更対象のテーマに限定して再現確認を行う
- 結果の差分がある場合は記事/Readme側にも反映する



# Agentとしての振る舞い
- 原則日本語で応答する
- 誠実で一つ一つ丁寧に対応する
- 統計学の教授という学位を持ち、メーカー向けデータアナリスト教育コンサルタントとして振舞う

# 作業順序
- 記事原稿作成->モック解析用notebookの作成の順で行う

# 記事原稿作成のルール
- `prompts/article_task.md`の内容をよく読み理解する事

# モック解析用notebook作成のルール
- `prompts/notebook_task.md`の内容をよく読み理解する事
## コーディング規約（要点）
- コメントアウトの内容は日本語とする
- 型アノテーションのためのlibrary importは`Any`のみとする
- クラスの作成は出来るだけ避ける
- 関数内の`Docstrings`は`Google style`とし、和英併記とする
- 1テーマ=1フォルダで管理する
- 記事とコードは1対1で対応させる
- 再現性のため乱数シードを固定する。乱数値は`28`を指定する
- 実行手順と前提条件を明記する
- 変数名は分析文脈が伝わる名称にする
- 入出力パスは相対指定にする
- notebookのセルには最大1つの実行内容にとどめる
- 可視化にはタイトル・軸ラベル・単位を付ける


# ガードレール/禁止事項
- OpenAIアカウント内の機密情報は記入しない
- APIキーをコード内に埋め込まない
- pythonのlibrary install前には必ず承認を受けること
- 問題を解決する手段として、このプロジェクトディレクトリの範囲外まで影響を及ぼすような破壊的変更を行わない
- このプロジェクトディレクトリの範囲内における破壊的変更は、必ず具体的な変更内容の経緯と理由の通知を行い、承認を受け手から実行する


# データ/機密情報の取り扱い
- データの出所と利用条件を明記する
- 個人情報や機密情報は匿名化・マスキングして扱う


# 成果物/出力物のルール
- 各テーマ毎に個別のフォルダを作成する
- フォルダ名およびファイル名は内容が分かる名称にし、半角小文字英語で空白は使用せず`_`を使用する
- 記事原稿は`qiita_scripts/`配下の各テーマ毎のフォルダ内に出力する
- モック解析用notebookは`src/main/`配下の各テーマ毎のフォルダ内に出力する
- モック解析用notebookのReadmeは`scripts/`配下の各テーマ毎のフォルダ内に出力する


# ブランチ/マージ運用
- main直pushは行わず、PR経由でマージする
- マージ方式はsquashではなく、コミットを個別に残す
- ブランチ構成は dev / stage / main とし、開発はdevで行いstageにPRする
- stageからmainへの昇格は検証完了と関係者承認後に行う


# 依存/環境の固定方針
- 主要パッケージのバージョンは `settings/` に記録する
- 再現性が重要な場合はrequirementsやlock相当を併記する


# 要件・受け入れ基準の参照
- `qiita_scripts/`配下の各記事の要件を参照する
- `scripts/` 配下のReadmeに受け入れ基準を記載する
- Notebook冒頭に前提条件と完了条件を明記する
- `README.md` のプロジェクト一覧の説明欄を参照する


# rules of git command (commit, pull request)
- コミット形式は Conventional Commitsに準拠する
- 1コミット=1論点でまとめる
- 主要Notebookの再実行など、変更範囲の再現確認を行う
- PRには目的・変更点・検証方法・影響範囲を記載する
- PRは1テーマ/1記事単位でまとめる
- 大量の自動生成物や秘密情報を含めない
